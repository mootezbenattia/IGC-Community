if (self.CavalryLogger) { CavalryLogger.start_js(["euXvP"]); }

__d("StoriesCardBlueVideoMedia_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesCardBlueVideoMedia_video",type:"Video",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]};e.exports=a}),null);
__d("StoriesCometPlaceholderWithNav.react",["fbt","CometList_DEPRECATED.react","CometListSection_DEPRECATED.react","React","StoriesBucketLoadingView.react","StoriesCometLeftRailLayout.react","StoriesCometListItemGlimmer.react","StoriesEnums","StoriesGating","StoriesNavListHeaderButtons.react","StoriesUnselected.react","stylex","useStoriesViewerDimensions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;function a(a){__p&&__p();var c=a.isPermalink;c=c===void 0?!1:c;var d=a.isNullState;d=d===void 0?!1:d;a=a.leftRail;a===void 0?!0:a;a=b("useStoriesViewerDimensions")();var e=b("StoriesGating").getBackgroundStyle();d=d?b("React").jsx(b("StoriesUnselected.react"),{}):b("React").jsx("div",{className:"dzlist6r msbwk0y7 flx89l3n ms05siws l9j0dhe7 stjgntxs ni8dbmo4 puxov6c6 r893ighp ozuftl9m n851cfcs tvfksri0 n1l5q3vz btwxx1t3 j83agx80 kzx2olss aot14ch1 p86d2i9g beltcj47",style:a,children:b("React").jsx(b("StoriesBucketLoadingView.react"),{})});return b("React").jsx(b("StoriesCometLeftRailLayout.react"),{hasRightRail:!1,isPermalink:c,leftRail:b("React").jsxs(b("CometList_DEPRECATED.react"),{auxiliary:b("React").jsx(b("StoriesNavListHeaderButtons.react"),{}),heading:g._("Stories"),children:[b("React").jsx(b("CometListSection_DEPRECATED.react"),{heading:g._("Votre story"),children:b("React").jsx(b("StoriesCometListItemGlimmer.react"),{numberOfItems:1})}),b("React").jsx(b("CometListSection_DEPRECATED.react"),{heading:g._("Toutes les stories"),children:b("React").jsx(b("StoriesCometListItemGlimmer.react"),{isFriends:!0,numberOfItems:6})})]}),children:b("React").jsx("div",{className:(h||(h=b("stylex"))).dedupe({"background-color-1":"mjc05ihr","display-1":"j83agx80","height-1":"datstx6m","justify-content-1":"taijpn5t","width-1":"k4urcfbm"},e===b("StoriesEnums").BACKGROUND_STYLE.BLACK?{"background-color-1":"tqsryivl"}:null),children:d})})}e.exports=a}),null);
__d("StoriesTimespentPixel.react",["requireCond","cr:764837","cr:808374","React","StoriesLoggerContext","StoriesViewer2URI","ViewableImpressionEventHandler","ViewableImpressionTracking","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=(c=b("React")).useContext,h=c.useEffect,i=c.useRef,j=c.useState,k=null;function a(a){__p&&__p();var c=i(null),d=j(!1),e=d[0],f=d[1];d=g(b("StoriesLoggerContext"));d=d.logger;h(function(){b("ViewableImpressionTracking").init();k&&b("ViewableImpressionEventHandler")&&b("ViewableImpressionEventHandler").instance.handleEvent(k,{cause:"default",name:"hidden"});var a=c==null?void 0:c.current;a&&b("ViewableImpressionEventHandler").instance.handleEvent(a,{cause:"default",name:"visible"});k=c.current},[]);h(function(){if(a.cardID==="")return;b("cr:764837")&&b("cr:764837").inform("Stories/cardChanged")},[a.cardID]);h(function(){var a=function(a){f(!0),b("StoriesViewer2URI").isValid(a)||k&&b("ViewableImpressionEventHandler")&&b("ViewableImpressionEventHandler").instance.handleEvent(k,{cause:"default",name:"hidden"})};b("cr:808374")&&b("cr:808374").registerHandler(a);return function(){b("cr:808374")&&b("cr:808374").removeHandler(a)}});d=d.getTimespentConfig();return b("React").createElement("div",babelHelpers["extends"]({className:"k4urcfbm rk01pc8j j9ispegn pmk7jnqg ay7djpcl"+(e?" mkhogb32":"")},d,{key:a.cardID,ref:c}))}e.exports=a}),null);
__d("useStoriesReportBlueBug",["AsyncDialog","AsyncRequest","React","StoriesPauseReasons"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useRef,i="/ajax/bugs/report",j="219500115583764";function a(a){__p&&__p();var c=a.setPause,d=h(null),e=g(function(){var a=new(b("AsyncRequest"))().setData({product_category_id:j}).setURI(i),e=d.current;e&&(e instanceof Element||e instanceof Text)&&a.setRelativeTo(e);c(!0,b("StoriesPauseReasons").BUG_DIALOG);b("AsyncDialog").send(a,function(a){a.subscribe("hide",function(){c(!1,b("StoriesPauseReasons").BUG_DIALOG)})})},[c]);a=g(function(){e()},[e]);return[a,d]}e.exports=a}),null);
__d("StoriesCardTimerSourceVideo",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3;a=function(){__p&&__p();function a(a){this.$1=a}var b=a.prototype;b.getDuration=function(){return this.$1.getPlaybackDuration()*g};b.getNewTimeElapsed=function(a){return this.$1.getCurrentTimePosition()*g};b.play=function(){this.$1.play("user_initiated")};b.pause=function(){this.$1.pause("user_initiated")};return a}();e.exports=a}),null);
__d("useStoriesCardNoopLogging",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){}}e.exports=a}),null);
__d("StoriesBugNub.react",["ix","React","TetraButton.react","fbicon","gkx","stylex","useStoriesReportBug"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=b("useStoriesReportBug")(a);var c=a[0];a=a[1];var d=b("gkx")("678680"),e=b("gkx")("708253");return!d||e?null:b("React").jsx("div",{className:"fcg2cn6m pmk7jnqg rgwamhcl",children:b("React").jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("530511"),16),label:"bug nub",labelIsHidden:!0,onPress:c,ref:a,size:"medium",type:"secondary"})})}e.exports=a}),null);
__d("useStoriesBluePageTransitionListener",["requireCond","cr:808374","React","StoriesViewer2URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect;function a(a){g(function(){var c=function(c){b("StoriesViewer2URI").isValid(c)||a()};b("cr:808374")&&b("cr:808374").registerHandler(c);return function(){b("cr:808374")&&b("cr:808374").removeHandler(c)}})}e.exports=a}),null);
__d("storiesJewelArbiterListener",["Arbiter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.onJewelHidden,d=a.onJewelShown,e=[];e.push(b("Arbiter").subscribe("layer_shown",function(a,b){(b.type==="Jewel"||b.type==="HELP_LITE")&&d!=null&&d()}),b("Arbiter").subscribe("layer_hidden",function(a,b){(b.type==="Jewel"||b.type==="HELP_LITE")&&c!=null&&c()}));return function(){e.forEach(function(a){a!=null&&b("Arbiter").unsubscribe(a)})}}e.exports=a}),null);
__d("storiesOpenComposer",["Arbiter","AsyncDialog","AsyncRequest","ReactComposerEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.onClose,d=a.onOpen;a=a.composerURI;var e=[],f=!1;b("AsyncDialog").send(new(b("AsyncRequest"))(a),function(a){a.subscribe("hide",function(){f=!1,c()}),a.subscribe("show",function(){d()})});e.push(b("Arbiter").subscribe("ReactComposerDialogGetComposerIDHelper/broadcastComposerID",function(a,d){a=d.composerID;f=!0;e.push(b("Arbiter").subscribe(b("ReactComposerEvents").COMPOSER_UNMOUNT+a,function(){f&&(f=!1,c())}))}));e.push(b("Arbiter").subscribe("layer_hidden",function(){f||c()}));return function(){e.forEach(function(a){a!=null&&b("Arbiter").unsubscribe(a)})}}e.exports=a}),null);
__d("storiesOpenMessageViewerDialog",["Arbiter","AsyncDialog","AsyncRequest","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;function a(a,c,d){__p&&__p();d===void 0&&(d=null);var e=!1,f=[];a=new(g||(g=b("URI")))("/ajax/messaging/composer.php").addQueryData("ids",[a]);a=new(b("AsyncRequest"))(a);d&&a.setRelativeTo(d);b("AsyncDialog").send(a,function(a){a.subscribe("beforeshow",function(){e=!0}),a.subscribe(["cancel","hide"],function(){e=!1})});f.push(b("Arbiter").subscribe("layer_hidden",function(){e||c()}));return function(){f.forEach(function(a){a!=null&&b("Arbiter").unsubscribe(a)})}}e.exports=a}),null);
__d("StoriesTrayLoggerSessionProvider",["React","StoriesTrayLoggerSessionContext"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.children;a=a.trackingStrings;return b("React").jsx(b("StoriesTrayLoggerSessionContext").Provider,{value:{trackingStrings:a},children:c})}e.exports=a}),null);
__d("FBStoriesViewer2",["csx","cx","requireDeferred","Arbiter","ChatSidebarActions","ChatSidebarStore","CSS","DOM","DOMQuery","FantaHider","FBLogger","FBStoriesTrayReloadXHPTray","PageTransitions","React","ReactDOM","StoriesArchiveCardStoreForBlue","StoriesCometPlaceholder.react","StoriesGating","StoriesLoggingConstants","StoriesTrayLoggerSessionProvider","StoriesViewer2URI","URI","UserAgent","WebStorage","deferredLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=(a=b("deferredLoadComponent"))((c=b("requireDeferred"))("StoriesViewerRoot.react")),l=a(c("StoriesViewerSuspenseRoot.react")),m=a(c("StoriesViewerSingleBucketRoot.react")),n=a(c("StoriesArchiveRoot.react")),o="fb_stories_theater",p=4;d=function(){__p&&__p();a.getInstance=function(){this.$9||(a.$9=new a());return a.$9};a.open=function(b){a.getInstance().open(b)};function a(){__p&&__p();var a=this;this.$6=null;this.$7=null;this.$8=!1;this.$13=function(c){__p&&__p();if(b("StoriesViewer2URI").isValid(c))return!0;a.$10();a.$7&&a.$7.unsubscribe();var d=a.$6;if(d&&c.getQualifiedURI().toString()===d.getQualifiedURI().toString()&&(!a.$8||!b("StoriesViewer2URI").isTileGridPermalink(c.getPath()))){if(c.stripTrailingSlash().getPath()===""){d=(i||(i=b("WebStorage"))).getSessionStorage();c=d!=null?d.getItem("stories_tray_expanded"):"false";b("FBStoriesTrayReloadXHPTray").reloadTray(c=="true")}b("PageTransitions").transitionComplete();return!0}return!1};this.$1=!1;this.$3=b("DOMQuery").scry(document.body,"._li")[0]}var c=a.prototype;c.toggle=function(a,b){a?this.open(b):this.$10()};c.open=function(a){__p&&__p();var c=this,d,e=a.bucketID,f=a.cardID,g=function d(e){if(b("StoriesViewer2URI").isValid(e)===!1){b("FBLogger")("fbstories").mustfix("Stories Viewer Transition Handler hit with non story viewer URL with uri: "+e.getPath());return!1}b("PageTransitions").removeHandler(d,p);c.$11(a);b("PageTransitions").transitionComplete();return!0};(d=b("PageTransitions")).registerHandler(g,p);this.$6=d.getCurrentURI();this.$8=d.isTransitioning();d.go(b("StoriesViewer2URI").getURI(e,f))};c.closeArchiveDialogAndRefresh=function(){b("StoriesArchiveCardStoreForBlue").DeletedStoryList.size>0&&(b("StoriesArchiveCardStoreForBlue").DeletedStoryList.forEach(function(a){if(b("StoriesArchiveCardStoreForBlue").StoriesArchiveDataMap.has(a)){var c=b("StoriesArchiveCardStoreForBlue").StoriesArchiveDataMap.get(a);c&&(c.onDeleted(),b("StoriesArchiveCardStoreForBlue").StoriesArchiveDataMap["delete"](a))}}),b("StoriesArchiveCardStoreForBlue").DeletedStoryList.clear()),b("StoriesArchiveCardStoreForBlue").SeenStoryList.size>0&&(b("StoriesArchiveCardStoreForBlue").SeenStoryList.forEach(function(a){if(b("StoriesArchiveCardStoreForBlue").StoriesArchiveDataMap.has(a)){a=b("StoriesArchiveCardStoreForBlue").StoriesArchiveDataMap.get(a);a&&a.onSeenStory()}}),b("StoriesArchiveCardStoreForBlue").SeenStoryList.clear()),this.$10()};c.navigateToEntryPoint=function(){this.$6&&b("StoriesViewer2URI").isValid(this.$6)&&(this.$6=new(j||(j=b("URI")))("/"),this.$8=!1),this.$6?b("PageTransitions").go(this.$6):(j||(j=b("URI"))).go("/")};c.$12=function(a){__p&&__p();var c=a.bucketID,d=a.bucketListFetchPolicy,e=a.cardID,f=a.currentTime,g=a.openSource,h=a.traySessionID,i=a.viewerSessionID,j=a.tilePosition;a=a.trackingString;b("CSS").addClass(this.$3,"_72b0");document.body&&b("CSS").addClass(document.body,"_7d54");var p=b("DOM").create("div",{id:o});b("CSS").setClass(p,"_74r7");var q=b("DOM").create("div");b("DOM").appendContent(q,p);this.$4=q;this.$2=p;b("CSS").setClass(q,"_74r8");b("UserAgent").isBrowser("Edge")||b("CSS").addClass(q,"_7qac");b("DOM").appendContent(this.$3,q);q=null;if(g===b("StoriesLoggingConstants").ACTION_SOURCE.ARCHIVE&&b("StoriesGating").isUsingStoriesArchiveViewerV2())f!=null&&(q=b("React").jsx(n,{currentStoryTime:f,cardID:e||"",fadeIn:!0,openSource:b("StoriesLoggingConstants").ACTION_SOURCE.ARCHIVE,traySessionID:h,viewerSessionID:i}));else{f=b("StoriesGating").shouldUseSuspenseVersionViewer();var r=g===b("StoriesLoggingConstants").ACTION_SOURCE.FACEBOOK_CHAT_TAB||g===b("StoriesLoggingConstants").ACTION_SOURCE.MESSENGER_DOT_COM||g===b("StoriesLoggingConstants").ACTION_SOURCE.POST_HEADER&&f||g===b("StoriesLoggingConstants").ACTION_SOURCE.TODAY_IN&&f;if(f&&!r){q=b("React").jsx(l,{bucketID:c,bucketListFetchPolicy:d,cardID:e||"",fadeIn:!0,openSource:(f=g)!=null?f:b("StoriesLoggingConstants").ACTION_SOURCE.TRAY,traySessionID:h,tilePosition:j,viewerSessionID:i})}else{d=null;r?d=m:d=k;q=b("React").jsx(d,{bucketID:c,cardID:e||"",fadeIn:!0,openSource:(f=g)!=null?f:b("StoriesLoggingConstants").ACTION_SOURCE.TRAY,traySessionID:h,tilePosition:j,viewerSessionID:i})}}r=c==="";b("ReactDOM").render(b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("StoriesCometPlaceholder.react"),{isNullState:r}),children:b("React").jsx(b("StoriesTrayLoggerSessionProvider"),{trackingStrings:new Map([[c,a]]),children:q})}),p)};c.openDialogMessenger=function(a){this.openDialog(a)};c.openDialog=function(a){b("Arbiter").inform("jewel/hide");if(this.$1)return;this.$1=!0;this.$12(a)};c.openDialogArchive=function(a){this.$11(a)};c.$11=function(a){__p&&__p();var c=this;b("Arbiter").inform("jewel/hide");if(this.$1)return;this.$1=!0;this.$7=b("Arbiter").subscribe("page_transition",function(a,d){a=d.uri;if(b("StoriesViewer2URI").isValid(a))return;if(!c.$1){c.$7&&c.$7.unsubscribe();return}c.$13(a)});this.$12(a);b("FantaHider").hide();b("ChatSidebarStore").isEnabled()?(this.$5=b("ChatSidebarStore").getVisibleType(),b("ChatSidebarActions").disable()):this.$5=null;b("PageTransitions").registerHandler(this.$13)};c.$14=function(){this.$2!=null&&(b("ReactDOM").unmountComponentAtNode(this.$2),this.$2=null),b("CSS").removeClass(this.$3,"_72b0"),document.body&&b("CSS").removeClass(document.body,"_7d54"),this.$4!=null&&(b("DOM").remove(this.$4),this.$4=null)};c.closeDialogMessenger=function(){this.closeDialog()};c.closeDialog=function(){if(this.$1===!1)return;this.$14();this.$1=!1};c.$10=function(){if(this.$1===!1)return;b("PageTransitions").removeHandler(this.$13);this.$14();b("FantaHider").unhide();this.$5!=null&&b("ChatSidebarActions").enable(this.$5);this.$1=!1};return a}();e.exports=d}),null);
__d("StoriesCardBlueVideoComponent.react",["requireCond","cr:1072138"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1072138")}),null);
__d("StoriesCardBlueVideoMedia.react",["React","StoriesCardTimerSourceVideo","StoriesPauseReasons","StoriesRelay","VideoDataContainer.react","VideoPlayer.react","VideoPlayerQualitiesArray","stylex","StoriesCardBlueVideoMedia_video.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("React").useEffect,j=b("React").useRef;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment,l=b("VideoPlayerQualitiesArray").getHighestVideoQuality;(h||(h=b("stylex"))).inject(".b4mxh4y2{background-color:rgba(0,0,0,0)}",1);h.inject(".h7942ock{border:none}",.1);h.inject(".pytsy3co{height:100%}",1);h.inject(".s8sjc6am{position:absolute}",1);h.inject(".myo4itp8{left:0}",1,".myo4itp8{right:0}");h.inject(".ekq1a7f9{top:0}",1);h.inject(".mfclru0v{width:100%}",1);h.inject(".i85zmo3j{align-items:center}",1);h.inject(".n86ytk1e{background-color:var(--fds-black-alpha-30)}",1);h.inject(".alzwoclg{display:flex}",1);h.inject(".cqf1kptm{flex-direction:column}",1);h.inject(".pytsy3co{height:100%}",1);h.inject(".jcxyg2ei{justify-content:center}",1);h.inject(".mfclru0v{width:100%}",1);function a(a){__p&&__p();var c=a.isMuted,d=a.isPaused,e=a.onTimerSourceUpdate,f=a.onVideoLoaded,h=a.setPause;a=a.video;var m=j([]),n=j(null);a=k(g||(g=function(){return b("StoriesCardBlueVideoMedia_video.graphql")}),a);a=a==null?void 0:a.id;var o=function(a){__p&&__p();n.current=a;if(a==null)return;e(new(b("StoriesCardTimerSourceVideo"))(a));d||(a.play("autoplay_initiated"),h(!1,b("StoriesPauseReasons").VIDEO_PLAYBACK));c&&a.mute();m.current=[a.addListener("playbackNotAllowed",function(a){h(!0,b("StoriesPauseReasons").VIDEO_PLAYBACK),f()}),a.addListener("play",function(a){f()}),a.addListener("beginPlayback",function(a){f()}),a.addListener("buffered",function(b){b=a.getAvailableVideoQualities();b=l(b);b!=null&&a.getSelectedVideoQuality()!==b&&a.setPreferredVideoQuality(b)})]},p=function(a){a.stopPropagation()};i(function(){n.current!=null&&(c?n.current.mute():n.current.unmute())},[c]);i(function(){n.current!=null&&(d?n.current.pause("user_initiated"):n.current.play("user_initiated"))},[d]);return a==null?null:b("React").jsxs("div",{className:"mfclru0v jcxyg2ei pytsy3co cqf1kptm alzwoclg n86ytk1e i85zmo3j",children:[b("React").jsx(b("VideoDataContainer.react"),{videoID:a,children:b("React").jsx(b("VideoPlayer.react"),{forceHD:!0,videoData:b("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER,playerOrigin:"fb_stories",subOrigin:"camera_post",ref:function(a){o(a==null?void 0:a.vpc)}})}),b("React").jsx("div",{className:"mfclru0v ekq1a7f9 myo4itp8 s8sjc6am pytsy3co h7942ock b4mxh4y2",onClick:p})]})}e.exports=a}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["VwPHo"]); }

__d("TimelineProfilePictureLoggerEnums",[],(function(a,b,c,d,e,f){e.exports={actions:{ADD_FRAME:"add_frame",EDIT_THUMBNAIL:"edit_thumbnail",FROM_PHOTOS:"from_photos",MAKE_PROFILE:"make_profile",SILHOUETTE:"silhouette",SUGGESTION:"suggestion",SUGGESTION_UPLOAD:"suggestion_upload",SYNCED_PHOTO:"synced_photo",TAKE_PHOTO:"take_photo",UPLOAD:"upload_photo",USE_PREVIOUS:"use_previous"},flows:{PERMALINK:"permalink",SNOWLIFT:"snowlift",SPOTLIGHT:"spotlight",VAULT:"vault",ZOOMCROP:"zoomcrop"},steps:{CANCEL:"cancel",CROP:"crop",CROP_FAIL:"crop_fail",CROP_SAVING:"crop_saving",CROP_SUCCESS:"crop_success",DRAG_AND_DROP:"drag_and_drop",FAIL:"fail",INIT:"init",LOADING:"loading",PREVIOUS_PIC_FAIL:"previous_pic_fail",PREVIOUS_PIC_INIT:"previous_pic_init",PREVIOUS_PIC_SAVING:"previous_pic_saving",PREVIOUS_PIC_SUCCESS:"previous_pic_success",RESIZE_BEGIN:"resize_begin",RESIZE_SKIPPED:"resize_skipped",RESIZE_SUCCESS:"resize_success",RESIZE_FAIL:"resize_fail",SKIP_CROP:"skip_crop",SUCCESS:"success",UPLOAD_CANCEL:"upload_cancel",UPLOAD_SELECT:"upload_select",UPLOAD_SUCCESS:"upload_success",VIEWER_INIT:"viewer_init"}}}),null);
__d("CometInteractionSourceContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").createContext(10);e.exports=a}),null);
__d("CometVPVDUserActivityMonitor",["UFI2UserActivityMonitor"],(function(a,b,c,d,e,f){"use strict";a={isUserActive:function(){return b("UFI2UserActivityMonitor").getActivityState()==="ACTIVE"},subscribe:function(a){var c=b("UFI2UserActivityMonitor").subscribe(function(b){b=b==="ACTIVE";a&&a(b)});return function(){c&&c.remove()}}};e.exports=a}),null);
__d("useVPVDImpression",["requireCond","CometVPVDUserActivityMonitor","React","isIntersectionObserverEntryVPVDVisible","useVisibilityObserver","cr:921407"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=250,i=200;a=function(a){__p&&__p();var c=a.isLite,d=a.minVisiblePx;d=d===void 0?i:d;var e=a.minVisibleTimeMs,f=e===void 0?h:e,j=a.onVPVDEnd;e=a.onVPVDStart;a=b("cr:921407")();var k=a[0];a=a[1];var l=g(function(a){if(a.visibleDuration<f)return;j(a)},[f,j]),m=c===!0?1:d;d=g(function(a){return b("isIntersectionObserverEntryVPVDVisible")(a,m)},[m]);c=c===!0?null:{thresholdOverride:"EXPENSIVE"};d=babelHelpers["extends"]({activityMonitorOverride:b("CometVPVDUserActivityMonitor"),hiddenWhenCSSStyleHidden:!0,hiddenWhenZeroArea:!0,isEntryInViewport:d},c);c=b("useVisibilityObserver")({onHidden:l,onVisibilityDurationUpdated:a,onVisible:e,options:d});return[c,k]};e.exports=a}),null);
__d("ServerRedirect",["ReloadPage","URI"],(function(a,b,c,d,e,f){var g;a={redirectPageTo:function(a,c,d){(g||(g=b("URI"))).go(a,c,d)},reloadPage:function(){b("ReloadPage").now()}};e.exports=a}),null);
__d("ProfilePhotoActionLogger",["Banzai"],(function(a,b,c,d,e,f){a={EVENT_SELECT_METHOD:"select_method",EVENT_CAMERA_PERMISSION_PROVIDED:"permission_provided",EVENT_CAMERA_PERMISSION_DENIED:"permission_denied",EVENT_CAMERA_NO_WEBCAM:"permission_denied",EVENT_CAMERA_UNKNOWN_MEDIASTREAM_ERROR:"unknown_mediastream_error",EVENT_CAMERA_TAKE_PHOTO:"take_photo",EVENT_CAMERA_RETAKE_PHOTO:"retake_photo",EVENT_CAMERA_UPLOAD_ATTEMPT:"upload_attempt",EVENT_CAMERA_UPLOAD_ERROR:"upload_error",EVENT_CAMERA_UPLOAD_SUCCESS:"upload_success",SOURCE_SUGGESTIONS:"suggestions",SOURCE_TIMELINE:"timeline",SOURCE_NUX:"nux",METHOD_EXISTING:"existing",METHOD_UPLOAD:"upload",METHOD_CAMERA:"camera",log:function(a,c,d){b("Banzai").post("profile_photo_action",{event:a,source:c,method:d})}};e.exports=a}),null);
__d("TimelineProfilePicConfig",["fbt"],(function(a,b,c,d,e,f,g){a={loading:"timeline/profile_pic/loading",success:"timeline/profile_pic/success",leavingMessage:g._("La photo de votre profil est en cours de t\u00e9l\u00e9chargement. Souhaitez-vous vraiment quitter\u00a0?")};e.exports=a}),null);
__d("ProfilePictureFlowLogging",["Arbiter","Banzai","Event","Parent","ProfilePhotoActionLogger","Run","TimelineProfilePicConfig","TimelineProfilePictureLoggerEnums","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g=b("TimelineProfilePicConfig").loading,h=b("TimelineProfilePicConfig").success,i="data-action-type",j,k,l,m;function n(){m&&m.unsubscribe(),m=null}var o={action:b("TimelineProfilePictureLoggerEnums").actions,flow:b("TimelineProfilePictureLoggerEnums").flows,step:b("TimelineProfilePictureLoggerEnums").steps,log:function(a){var c=a||o.step.INIT;b("Banzai").post("profile_pic_action",{action_type:j,flow_type:k,step_type:c});j===o.action.UPLOAD&&c===o.step.INIT&&b("ProfilePhotoActionLogger").log(b("ProfilePhotoActionLogger").EVENT_SELECT_METHOD,l,b("ProfilePhotoActionLogger").METHOD_UPLOAD);k=null;(a==="success"||a==="fail")&&(j=null);return o},setAction:function(a){j=a;return o},setFlowType:function(a){k=a;return o},setSource:function(a){l=a;return o},init:function(a,c){c&&(l=c),m||(m=b("Arbiter").subscribe([g,h],function(a){o.log(a===g?b("TimelineProfilePictureLoggerEnums").steps.LOADING:b("TimelineProfilePictureLoggerEnums").steps.SUCCESS)}),b("Run").onLeave(n)),b("tidyEvent")(b("Event").listen(a,"click",function(a){a=b("Parent").byAttribute(a.getTarget(),i);if(!a)return;o.setAction(a.getAttribute(i)).log()}))},initMenuItems:function(a,b,c){o.init(a.getRoot(),c)}};e.exports=o}),null);
__d("XWorkNewsfeedNuxNextStepController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/work/newsfeed_nux/next_step/",{})}),null);
__d("ProfilePicCropViewerInit",["Bootloader","CurrentCommunity","ProfilePictureFlowLogging","React","ServerRedirect","XWorkNewsfeedNuxNextStepController"],(function(a,b,c,d,e,f){__p&&__p();var g="profile-picture-crop",h="loading",i=b("ProfilePictureFlowLogging").flow,j,k;function l(){k&&k.close()}function m(a,c,d){__p&&__p();d=d||{};b("Bootloader").loadModules(["SpotlightViewerInit","ZoomProfilePicCropViewer.react","PhotoStore","AsyncRequest","AsyncResponse","XProfilePicCropViewerAsyncController"],function(e,f,i,m,n,o){__p&&__p();l();var p=d.stickerID;j=g+":"+a+":"+c;p&&(j+=":"+p);var q=d.successCallback,r=b("CurrentCommunity").getID()!=="0";!q&&(d.source==="atwork_nux"||d.source==="timeline"||d.source==="atwork_profile_nux")&&r&&(q=function(a){a=b("XWorkNewsfeedNuxNextStepController").getURIBuilder().getURI();new m().setURI(a).setData({current_step_id:1,skipped:!1}).setHandler(function(){b("ServerRedirect").reloadPage()}).send()});if(!d.skipCropping){k=e.render(b("React").jsx(f,{cancelCallback:d.cancelCallback,cropMode:d.cropMode,errorCallback:d.errorCallback,method:d.method,open:!0,photoID:a,profileID:c,setid:j,source:d.source,successCallback:q,uploadRequest:d.uploadRequest,warnOnCancel:d.warnOnCancel}),function(){k=null});if(i.hasBeenCreated(j)||a===h)return;r=o.getURIBuilder().setString("photo_id",a).setInt("profile_id",c).setString("set_id",j).setBool("will_load_more_photos",!0);p&&r.setInt("sticker_id",p);r=r.getURI();var s=j;new m(r).setErrorHandler(function(a){s===j&&l(),n.defaultErrorHandler(a)}).send()}},"ProfilePicCropViewerInit");return!0}a={close:l,getFlowType:function(){return i.ZOOMCROP},useCropViewer:function(){return!0},loading:function(a,b){m(h,a,b)},loadID:m};e.exports=a}),null);